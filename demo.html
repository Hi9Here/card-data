
<!doctype html>
<html>
  <head>
    <title>card-data demo</title>
    <script src="/bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="card-data.html">
    <link rel="import" href="../paper-input/paper-input.html">
    <link rel="import" href="../paper-button/paper-button.html">
    <link rel="import" href="../sortable-list/sortable-list.html">
    <link rel="import" href="../paper-material/paper-material.html">
    <link rel="import" href="../update-data/update-data.html">
    <link rel="import" href="../lunr-js/lunr-js.html">
  </head>
  <body style="background:#f4f4f4">
    <h3>card-data Demo</h3>
    <template id="t" is="dom-bind">
      
      <card-data id="card" cards="{{cards}}" location="https://open-elements.firebaseio.com/all/" user-id="marcus6666" token="{{token}}"></card-data>
      
      <h1>Sort Cards</h1>
      <sortable-list sort-me="{{cards}}" output="{{sortMe}}">
        <template is="dom-repeat" items="{{sortMe}}" as="card">
          <paper-material elevation="4" style="margin:12px 7px;background:#fff;display:inline-block;width:200px;height:250px">
            <a href="{{card.url}}" target="_blank" style="text-decoration: initial;color: black"><div style="background-size:cover;background-position: center;display:inline-block;width:200px;height:147px;background-image:url({{card.image}});background-repeat: no-repeat;"></div></a><br />
            <a href="{{card.url}}" style="text-decoration: initial;color: black"><h3 style="margin: 0; padding: 13px;">{{card.title}}</h3></a>
            <a href="{{card.url}}" style="text-decoration: initial;color: black"><p style="margin: 0; padding: 0 13px;">{{card.data}}</p></a>
          </paper-material>
        </template>
      </sortable-list>
      <update-data update="{{cards}}" data="{{sortMe}}"></update-data> 

      <h1>Create card</h1>
      <paper-input label="title" value="{{newCard.title}}"></paper-input><br>
      <paper-input label="image" value="{{newCard.image}}"></paper-input><br>
      <paper-input label="url" value="{{newCard.url}}"></paper-input><br>
      <paper-input label="download" value="{{newCard.download}}"></paper-input><br>
      <paper-input label="data" value="{{newCard.data}}"></paper-input><hr>
      <paper-button on-tap="add">add</paper-button>
      
      <h1>Read Cards</h1>
      <paper-input label="filter" value="{{search}}"></paper-input>
      <lunr-js no-stop-words data="{{cards}}" search="{{search}}" output="{{output}}" ></lunr-js>
      
      <template is="dom-if" if="{{!output.length}}">
        <a href="https://www.google.com/search?q={{search}}">Google it</a>
      </template>
      
      <template is="dom-repeat" items="{{output}}" as="card">
        <img src="{{card.image}}" /> <br />
        title {{card.title}}<br />
        url {{card.url}}<br />
        download {{card.download}}<br />
        data {{card.data}}<br />
        <hr />
      </template>
      
      <h1>Update Cards</h1>
      <template is="dom-repeat" items="{{cards}}" as="card">
        <paper-input label="title" value="{{card.title}}"></paper-input><br>
        <paper-input label="image" value="{{card.image}}"></paper-input><br>
        <paper-input label="url" value="{{card.url}}"></paper-input><br>
        <paper-input label="download" value="{{card.download}}"></paper-input><br>
        <paper-input label="data" value="{{card.data}}"></paper-input><hr>
        <hr>
      </template>
      
      <h1>Delete Cards</h1>
      <template is="dom-repeat" items="{{cards}}" as="card">
        title {{card.title}}<br>
        <paper-button on-tap="remove" title="{{index}}">remove</paper-button>
        <hr>
      </template>
      
    </template>
  </body>
  <script>
    var t = document.querySelector('#t');

    t.newCard = {}
    t.remove = function(e) {
      debugger
      this.$.card.deleteCard(+e.target.title)
    }
    t.add = function() {
      if (this.$.card.addCard(this.newCard)) {
        this.set("newCard",{})
      }
    }
  </script>
</html>
